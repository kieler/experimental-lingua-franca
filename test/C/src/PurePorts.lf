target C {
    timeout: 1 sec
}

reactor Source(delay:time(0)) {
    pure output O
    
    timer t(delay, delay)
    
    reaction (t) -> O {=
        lf_set_present(O);
    =}
}

reactor Sink {
    pure input I
    
    reaction (I) {=
        if (I->is_present) {
            lf_print("Received input at %d", lf_time_logical_elapsed());
        }
    =}
}

reactor Forward {
    pure input I
    pure output O
    
    reaction (I) -> O {=
        if (I->is_present) {
            lf_set_present(O);
        }
    =}
}

main reactor {
    a = new Source(delay = 250 msec)
    b = new Source(delay = 333 msec)
    c = new Forward()
    d = new Sink()
    
    a.O -> c.I
    b.O -> c.I
    c.O -> d.I
}
